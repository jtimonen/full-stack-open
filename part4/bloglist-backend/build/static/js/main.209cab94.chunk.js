(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{18:function(e,t,n){e.exports=n(44)},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(16),u=n.n(l),c=n(2),o=n.n(c),i=n(4),s=n(1),m=n(5),d=n.n(m);n(40).config();var f="https://bloglister.herokuapp.com/api/blogs";var b={baseUrl:f},p=b.baseUrl,v=null,g={getAll:function(){return d.a.get(p).then((function(e){return e.data}))},create:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,d.a.post(p,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){var n="".concat(p,"/").concat(e);return d.a.put(n,t).then((function(e){return e.data}))},remove:function(e){var t={headers:{Authorization:v}},n="".concat(p,"/").concat(e);return d.a.delete(n,t).then((function(e){return e.data}))},setToken:function(e){v="bearer ".concat(e)}},E={login:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=n(17),k=function(e){return e.user.username!==e.blog.user.username?null:r.a.createElement("div",null,r.a.createElement("button",{onClick:e.onClick,className:"deletebutton"},"delete"))},O=function(e){var t=e.blog,n=e.button;return r.a.createElement("div",null,r.a.createElement("span",{className:"authors"},t.author,": "),r.a.createElement("span",{className:"titles"},t.title," "),r.a.createElement("button",{onClick:n.onClick,className:"normalbutton"},n.text))},j=function(e){var t=e.blog,n=e.opened,a=e.clickLike,l=e.clickDelete,u=e.user;return n?r.a.createElement("div",null,r.a.createElement("div",{className:"blogLikes"},t.likes," likes ",r.a.createElement("button",{onClick:a,className:"likebutton"},"like")),r.a.createElement("div",{className:"blogAdder"},"added by ",t.user.username),r.a.createElement("div",{className:"blogUrl"}," ",t.url),r.a.createElement(k,{blog:t,user:u,onClick:l})):null},y=function(e){var t=e.blog,n=e.saveLikeFun,l=e.deleteFun,u=e.user,c=Object(a.useState)(!1),o=Object(s.a)(c,2),i=o[0],m=o[1],d={onClick:function(){return m(!0)},text:"view"};i&&(d={onClick:function(){return m(!1)},text:"close"});return r.a.createElement("div",{className:"bordered"},r.a.createElement(O,{blog:t,opened:i,button:d}),r.a.createElement(j,{blog:t,opened:i,clickLike:function(){var e=Object(h.a)({},t,{likes:t.likes+1});n(e)},clickDelete:function(){l(t)},user:u}))},w=function(e){var t=e.blogs,n=e.user,a=e.saveLikeFun,l=e.deleteFun;if(null===n)return null;var u=t.map((function(e){return r.a.createElement(y,{key:e.id,blog:e,saveLikeFun:a,deleteFun:l,user:n})})).sort((function(e,t){var n=e.props.blog.likes;return t.props.blog.likes-n}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Blogs"),u)},x=function(e){return null===e.message?null:r.a.createElement("div",{className:e.type},e.message)},N=function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),l=n[0],u=n[1],c=Object(a.useState)(""),o=Object(s.a)(c,2),i=o[0],m=o[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Login to application"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.handleLoginFun(l,i),u(""),m("")}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Username"),r.a.createElement("td",null,r.a.createElement("input",{type:"text",value:l,name:"Username",onChange:function(e){var t=e.target;return u(t.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Password"),r.a.createElement("td",null,r.a.createElement("input",{type:"password",value:i,name:"Password",onChange:function(e){var t=e.target;return m(t.value)}}))))),r.a.createElement("button",{type:"submit",className:"normalbutton"},"login")))},S=function(e){var t=e.saveBlogFun,n=Object(a.useState)(""),l=Object(s.a)(n,2),u=l[0],c=l[1],o=Object(a.useState)(""),i=Object(s.a)(o,2),m=i[0],d=i[1],f=Object(a.useState)(""),b=Object(s.a)(f,2),p=b[0],v=b[1];return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:u,author:m,url:p}),c(""),d(""),v("")}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Title"),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"Title",value:u,onChange:function(e){var t=e.target;return c(t.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Author"),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"Author",value:m,onChange:function(e){var t=e.target;return d(t.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"URL"),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"URL",value:p,onChange:function(e){var t=e.target;return v(t.value)}}))))),r.a.createElement("button",{type:"submit",className:"normalbutton"},"save")))},C=function(e){var t=e.user,n=e.logoutFun;return null===t?null:r.a.createElement("div",{className:"login"},"Logged in as ",t.username," (",t.name,") ",r.a.createElement("button",{onClick:n,className:"normalbutton"},"logout"))},A=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),l=Object(s.a)(n,2),u=l[0],c=l[1],o={display:u?"none":""},i={display:u?"":"none"},m=function(){c(!u)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:m}})),r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement("button",{onClick:m,className:"normalbutton"},e.buttonLabel)),r.a.createElement("div",{style:i},e.children,r.a.createElement("button",{onClick:m,className:"normalbutton"},"cancel")))}));A.displayName="Togglable";var L=A,F=function(e){var t={display:null!==e.user?"":"none"};return r.a.createElement("div",{style:t},e.children)},U=function(e){var t={display:null===e.user?"":"none"};return r.a.createElement("div",{style:t},e.children)},T=b.baseUrl,B=function(){return r.a.createElement("footer",null," base url: ",T)},I=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],l=t[1],u=Object(a.useState)(null),c=Object(s.a)(u,2),m=c[0],d=c[1],f=Object(a.useState)(null),b=Object(s.a)(f,2),p=b[0],v=b[1],h=Object(a.useState)(null),k=Object(s.a)(h,2),O=k[0],j=k[1];Object(a.useEffect)((function(){g.getAll().then((function(e){return l(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);d(t),g.setToken(t.token)}}),[]);var y=Object(a.useRef)(),A=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.login({username:t,password:n});case 3:a=e.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(a)),g.setToken(a.token),d(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),v("Invalid username or password."),setTimeout((function(){v(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.create(t);case 2:n=e.sent,y.current.toggleVisibility(),g.getAll().then((function(e){l(e)})).then((function(){j("Added '".concat(n.title,"' to the list!")),setTimeout((function(){j(null)}),5e3)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.update(t.id,t);case 2:g.getAll().then((function(e){l(e)})).then((function(){j("You liked '".concat(t.title,"'!")),setTimeout((function(){j(null)}),5e3)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.remove(t.id);case 2:g.getAll().then((function(e){l(e)})).then((function(){j("Deleted blog '".concat(t.title,"'!")),setTimeout((function(){j(null)}),5e3)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(C,{user:m,logoutFun:function(){window.localStorage.removeItem("loggedBlogAppUser"),d(null)}}),r.a.createElement(x,{message:p,type:"error"}),r.a.createElement(x,{message:O,type:"notification"}),r.a.createElement(U,{user:m},r.a.createElement(N,{handleLoginFun:A}," ")),r.a.createElement(F,{user:m},r.a.createElement("h2",null,"Add new blog"),r.a.createElement(L,{buttonLabel:"add new",ref:y},r.a.createElement(S,{saveBlogFun:T}," "))),r.a.createElement(w,{blogs:n,user:m,saveLikeFun:I,deleteFun:D}),r.a.createElement(B,null))};n(43);u.a.render(r.a.createElement(I,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.209cab94.chunk.js.map