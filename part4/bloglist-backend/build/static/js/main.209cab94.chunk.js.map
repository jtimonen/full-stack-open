{"version":3,"sources":["config.js","services/blogs.js","services/login.js","components/DeleteButton.js","components/Blog.js","components/BlogList.js","components/Notification.js","components/LoginForm.js","components/BlogForm.js","components/LoginInfo.js","components/Togglable.js","components/VisibleWhenLogged.js","components/VisibleWhenNotLogged.js","components/Footer.js","App.js","index.js"],"names":["require","config","baseUrl","token","getAll","axios","get","then","response","data","create","newObject","a","headers","Authorization","post","update","id","url","put","remove","delete","setToken","newToken","login","credentials","DeleteButton","props","user","username","blog","onClick","className","BlogHeader","button","author","title","text","BlogBody","opened","clickLike","clickDelete","likes","Blog","saveLikeFun","deleteFun","useState","setOpened","blogButton","newBlog","BlogList","blogs","sortedBlogs","map","key","sort","b","likes1","Notification","message","type","LoginForm","setUsername","password","setPassword","onSubmit","event","preventDefault","handleLoginFun","value","name","onChange","target","BlogForm","saveBlogFun","newBlogTitle","setNewBlogTitle","newBlogAuthor","setNewBlogAuthor","newBlogUrl","setNewBlogUrl","LoginInfo","logoutFun","Togglable","React","forwardRef","ref","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","style","buttonLabel","children","displayName","VisibleWhenLogged","VisibleWhenNotLogged","Footer","App","setBlogs","setUser","errorMessage","setErrorMessage","notificationMessage","setNotificationMessage","useEffect","blogService","loggedUserJSON","window","localStorage","getItem","JSON","parse","blogFormRef","useRef","handleLogin","loginService","setItem","stringify","setTimeout","saveBlog","blogToSave","savedBlog","current","saveLike","likedBlog","deleteBlog","blogToDelete","removeItem","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.209cab94.chunk.js","sourcesContent":["require('dotenv').config()\nconst node_env = process.env.NODE_ENV\n\nlet baseUrl = 'https://bloglister.herokuapp.com/api/blogs' // production mode\nif (!node_env || node_env === 'development') {\n  baseUrl = '/api/blogs' // dev mode\n}\n\nexport default{ baseUrl }","import axios from 'axios'\nimport config from '../config.js'\nconst baseUrl = config.baseUrl\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async newObject => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\nconst update = (id, newObject) => {\n  const url = `${ baseUrl }/${id}`\n  const request = axios.put(url, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const config = {\n    headers: { Authorization: token },\n  }\n  const url = `${ baseUrl }/${id}`\n  const request = axios.delete(url, config)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, remove, setToken }","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import React from 'react'\n\nconst DeleteButton = (props) => {\n\n  // Hide if logged user is no the same as the one that added this blog\n  const id1 = props.user.username\n  const id2 = props.blog.user.username\n  const hide = (id1 !== id2)\n  if (hide) {\n    return null\n  }\n\n  // Else show the button\n  return (\n    <div>\n      <button onClick={props.onClick} className=\"deletebutton\">delete</button>\n    </div>\n  )\n}\n\n\nexport default DeleteButton","import React, { useState } from 'react'\nimport DeleteButton from './DeleteButton'\n\nconst BlogHeader = ( { blog, button }) => (\n  <div>\n    <span className='authors'>{blog.author}: </span>\n    <span className='titles'>{blog.title} </span>\n    <button onClick={button.onClick} className=\"normalbutton\">{button.text}</button>\n  </div>\n)\n\nconst BlogBody = ( { blog, opened, clickLike, clickDelete, user }) => {\n  if(!opened){\n    return(null)\n  }\n  return(\n    <div>\n      <div className='blogLikes'>\n        {blog.likes} likes <button onClick={clickLike} className=\"likebutton\">like</button>\n      </div>\n      <div className='blogAdder'>added by {blog.user.username}</div>\n      <div className='blogUrl'> {blog.url}</div>\n      <DeleteButton blog={blog} user={user} onClick={clickDelete}></DeleteButton>\n    </div>\n  )\n}\n\nconst Blog = ({ blog, saveLikeFun, deleteFun, user }) => {\n\n  const [opened, setOpened] = useState(false)\n  const clickView = () => setOpened(true)\n  const clickClose = () => setOpened(false)\n  let blogButton = { onClick: clickView, text: 'view' }\n  if(opened){\n    blogButton = { onClick: clickClose, text: 'close' }\n  }\n  const clickLikeFun = () => {\n    const newBlog = { ...blog, likes: blog.likes + 1 }\n    saveLikeFun(newBlog)\n  }\n  const clickDeleteFun = () => {\n    deleteFun(blog)\n  }\n  return(\n    <div className='bordered'>\n      <BlogHeader blog={blog} opened={opened} button={blogButton}></BlogHeader>\n      <BlogBody blog={blog} opened={opened} clickLike={clickLikeFun} clickDelete={clickDeleteFun} user={user}></BlogBody>\n    </div>\n  )\n\n}\n\nexport default Blog\n","import React from 'react'\nimport Blog from './Blog'\n\nconst BlogList = ({ blogs, user, saveLikeFun, deleteFun }) => {\n\n  if (user === null) {\n    return (null)\n  }\n\n  const mapFun = blog => {\n    return (\n      <Blog key={blog.id} blog={blog} saveLikeFun={saveLikeFun} deleteFun={deleteFun} user={user}/>\n    )\n  }\n\n  const compareFun = (a, b) => {\n    const likes1 = a.props.blog.likes\n    const likes2 = b.props.blog.likes\n    return(likes2 - likes1)\n  }\n\n  const sortedBlogs = blogs.map(mapFun).sort(compareFun)\n  return (\n    <div>\n      <h2>Blogs</h2>\n      {sortedBlogs}\n    </div>\n  )\n\n}\n\nexport default BlogList\n","import React from 'react'\n\nconst Notification = (props) => {\n  if (props.message === null) {\n    return null\n  }\n  return (\n    <div className={props.type}>\n      {props.message}\n    </div>\n  )\n}\n\nexport default Notification\n","import React, { useState } from 'react'\n\n\nconst LoginForm = (props) => {\n\n  // State hooks\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n\n  // Event handlers for typing input\n  const fun1 = ({ target }) => setUsername(target.value)\n  const fun2 = ({ target }) => setPassword(target.value)\n\n  // Login event handler\n  const handleLogin = (event) => {\n    event.preventDefault()\n    props.handleLoginFun(username, password)\n    setUsername('')\n    setPassword('')\n  }\n\n  return (\n    <div>\n      <h2>Login to application</h2>\n      <form onSubmit={handleLogin}>\n        <table>\n          <thead>\n          </thead>\n          <tbody>\n            <tr>\n              <td>Username</td>\n              <td>\n                <input type=\"text\" value={username} name=\"Username\" onChange={fun1} />\n              </td>\n            </tr>\n            <tr>\n              <td>Password</td>\n              <td>\n                <input type=\"password\" value={password} name=\"Password\" onChange={fun2} />\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <button type=\"submit\" className=\"normalbutton\">login</button>\n      </form>\n    </div>\n  )\n}\n\n\nexport default LoginForm\n","import React, { useState } from 'react'\n\nconst BlogForm = ({ saveBlogFun }) => {\n\n  // State hooks\n  const [newBlogTitle, setNewBlogTitle] = useState('')\n  const [newBlogAuthor, setNewBlogAuthor] = useState('')\n  const [newBlogUrl, setNewBlogUrl] = useState('')\n\n  // Event handlers for typing input\n  const fun1 = ({ target }) => setNewBlogTitle(target.value)\n  const fun2 = ({ target }) => setNewBlogAuthor(target.value)\n  const fun3 = ({ target }) => setNewBlogUrl(target.value)\n\n  // Event handler for clicking \"save\"\n  const addBlog = (event) => {\n    event.preventDefault()\n    const blogToAdd = {\n      title: newBlogTitle,\n      author: newBlogAuthor,\n      url: newBlogUrl\n    }\n    saveBlogFun(blogToAdd)\n    setNewBlogTitle('')\n    setNewBlogAuthor('')\n    setNewBlogUrl('')\n  }\n\n  return (\n    <div>\n      <form onSubmit={addBlog}>\n        <table>\n          <thead>\n          </thead>\n          <tbody>\n            <tr>\n              <td>Title</td>\n              <td>\n                <input type=\"text\" name='Title' value={newBlogTitle} onChange={fun1}/>\n              </td>\n            </tr>\n            <tr>\n              <td>Author</td>\n              <td>\n                <input type=\"text\" name='Author' value={newBlogAuthor} onChange={fun2}/>\n              </td>\n            </tr>\n            <tr>\n              <td>URL</td>\n              <td>\n                <input type=\"text\" name='URL' value={newBlogUrl} onChange={fun3}/>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <button type=\"submit\" className=\"normalbutton\">save</button>\n      </form>\n    </div>\n  )\n}\n\nexport default BlogForm","import React from 'react'\n\nconst LoginInfo = ({ user, logoutFun }) => {\n  if (user === null) {\n    return (null)\n  }\n  return (\n    <div className='login'>\n            Logged in as {user.username} ({user.name}) <button onClick={logoutFun} className=\"normalbutton\">logout</button>\n    </div>\n  )\n}\n\nexport default LoginInfo\n\n","import React, { useState, useImperativeHandle } from 'react'\nimport PropTypes from 'prop-types'\n\n// React component definition with forwardRef\nconst Togglable = React.forwardRef((props, ref) => {\n\n  const [visible, setVisible] = useState(false)\n\n  const hideWhenVisible = { display: visible ? 'none' : '' }\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  const toggleVisibility = () => {\n    setVisible(!visible)\n  }\n\n  useImperativeHandle(ref, () => {\n    return {\n      toggleVisibility\n    }\n  })\n\n\n  return (\n    <div>\n      <div style={hideWhenVisible}>\n        <button onClick={toggleVisibility} className=\"normalbutton\">{props.buttonLabel}</button>\n      </div>\n      <div style={showWhenVisible}>\n        {props.children}\n        <button onClick={toggleVisibility} className=\"normalbutton\">cancel</button>\n      </div>\n    </div>\n  )\n})\n\n// Prop types\nTogglable.propTypes = {\n  buttonLabel: PropTypes.string.isRequired\n}\nTogglable.displayName = 'Togglable'\nexport default Togglable","import React from 'react'\n\nconst VisibleWhenLogged = (props) => {\n\n  const visible = (props.user !== null)\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  return (\n    <div style={showWhenVisible}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default VisibleWhenLogged\n","import React from 'react'\n\nconst VisibleWhenNotLogged = (props) => {\n\n  const visible = (props.user === null)\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  return (\n    <div style={showWhenVisible}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default VisibleWhenNotLogged","import config from '../config.js'\nimport React from 'react'\n\nconst baseUrl = config.baseUrl\n\nconst Footer = () => {\n  return(\n    <footer> base url: {baseUrl}</footer>\n  )\n}\n\nexport default Footer\n","import React, { useState, useEffect, useRef } from 'react'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport BlogList from './components/BlogList'\nimport Notification from './components/Notification'\nimport LoginForm from './components/LoginForm'\nimport BlogForm from './components/BlogForm'\nimport LoginInfo from './components/LoginInfo'\nimport Togglable from './components/Togglable'\nimport VisibleWhenLogged from './components/VisibleWhenLogged'\nimport VisibleWhenNotLogged from './components/VisibleWhenNotLogged'\nimport Footer from './components/Footer'\n\nconst App = () => {\n\n  // State hooks\n  const [blogs, setBlogs] = useState([])\n  const [user, setUser] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [notificationMessage, setNotificationMessage] = useState(null)\n\n  // Effect hooks\n  useEffect(() => {\n    blogService.getAll().then(blogs => setBlogs(blogs))\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogAppUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      blogService.setToken(user.token)\n    }\n  }, [])\n\n  // Refs\n  const blogFormRef = useRef()\n\n  // Login handler\n  const handleLogin = async (username, password) => {\n    try {\n      const user = await loginService.login({ username, password })\n      window.localStorage.setItem('loggedBlogAppUser', JSON.stringify(user))\n      blogService.setToken(user.token)\n      setUser(user)\n    } catch (exception) {\n      setErrorMessage('Invalid username or password.')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  // Logout handler\n  const onLogOutClick = () => {\n    window.localStorage.removeItem('loggedBlogAppUser')\n    setUser(null)\n  }\n\n  // Blog add handler\n  const saveBlog = async (blogToSave) => {\n\n    const savedBlog = await blogService.create(blogToSave)\n    blogFormRef.current.toggleVisibility()\n    blogService.getAll()\n      .then(blogs => { setBlogs(blogs) })\n      .then(() => {\n        setNotificationMessage(`Added '${savedBlog.title}' to the list!`)\n        setTimeout(() => {\n          setNotificationMessage(null)\n        }, 5000)\n      })\n  }\n\n  // Like button click handler\n  const saveLike = async (likedBlog) => {\n    await blogService.update(likedBlog.id, likedBlog)\n    blogService.getAll()\n      .then(blogs => { setBlogs(blogs) })\n      .then(() => {\n        setNotificationMessage(`You liked '${likedBlog.title}'!`)\n        setTimeout(() => {\n          setNotificationMessage(null)\n        }, 5000)\n      })\n  }\n\n  // Delete button click handler\n  const deleteBlog = async (blogToDelete) => {\n    await blogService.remove(blogToDelete.id)\n    blogService.getAll()\n      .then(blogs => { setBlogs(blogs) })\n      .then(() => {\n        setNotificationMessage(`Deleted blog '${blogToDelete.title}'!`)\n        setTimeout(() => {\n          setNotificationMessage(null)\n        }, 5000)\n      })\n  }\n\n  return (\n    <div>\n\n      <LoginInfo user={user} logoutFun={onLogOutClick}></LoginInfo>\n\n      <Notification message={errorMessage} type='error' />\n      <Notification message={notificationMessage} type='notification' />\n\n      <VisibleWhenNotLogged user={user}>\n        <LoginForm handleLoginFun={handleLogin}> </LoginForm>\n      </VisibleWhenNotLogged>\n\n      <VisibleWhenLogged user={user}>\n        <h2>Add new blog</h2>\n        <Togglable buttonLabel=\"add new\" ref={blogFormRef}>\n          <BlogForm saveBlogFun={saveBlog}> </BlogForm>\n        </Togglable>\n      </VisibleWhenLogged>\n\n\n      <BlogList blogs={blogs} user={user} saveLikeFun={saveLike} deleteFun={deleteBlog}></BlogList>\n      <Footer></Footer>\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}